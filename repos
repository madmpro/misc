#!/usr/bin/env bash
# Made by Sinfallas <sinfallas@yahoo.com>
# Licence: GPL-2

if [[ "$EUID" != "0" ]]; then
	echo -e "\e[00;31mERROR: Debes ser root.\e[00m"
	exit 1
fi

#driver video
add-apt-repository -y ppa:oibaf/graphics-drivers
add-apt-repository -y ppa:ubuntu-x-swat/updates

#anydesk
wget -qO - https://keys.anydesk.com/repos/DEB-GPG-KEY | apt-key add -
echo "deb http://deb.anydesk.com/ all main" | tee /etc/apt/sources.list.d/anydesk-stable.list

#brave
curl -s https://brave-browser-apt-release.s3.brave.com/brave-core.asc | apt-key --keyring /etc/apt/trusted.gpg.d/brave-browser-release.gpg add -
echo "deb [arch=amd64] https://brave-browser-apt-release.s3.brave.com/ stable main" | tee /etc/apt/sources.list.d/brave-browser-release.list

#apt-fast
add-apt-repository -y ppa:apt-fast/stable

#linrunner (tlp)
add-apt-repository -y ppa:linrunner/tlp

#google chrome
echo "deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main" > /etc/apt/sources.list.d/chrome.list
wget -q -O - https://dl.google.com/linux/linux_signing_key.pub | apt-key add -

#haguichi (gui para hamachi)
add-apt-repository -y ppa:webupd8team/haguichi

#jellyfin (media server)
echo "deb [arch=$( dpkg --print-architecture )] https://repo.jellyfin.org/ubuntu $( lsb_release -c -s ) main" | tee /etc/apt/sources.list.d/jellyfin.list
wget -O - https://repo.jellyfin.org/ubuntu/jellyfin_team.gpg.key | apt-key add -

#bashtop
echo "deb http://packages.azlux.fr/debian/ buster main" | tee /etc/apt/sources.list.d/azlux.list
wget -qO - https://azlux.fr/repo.gpg.key | apt-key add -

#alacritty
add-apt-repository -y ppa:mmstick76/alacritty

#docker
apt -y install apt-transport-https ca-certificates curl gnupg-agent software-properties-common
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | apt-key add -
add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"

apt update -qq
apt -y install linux-generic-hwe-20.04 anydesk apt-fast brave-browser google-chrome-stable jellyfin alacritty bashtop python3-psutil docker-ce docker-ce-cli containerd.io

usermod -aG video jellyfin
usermod -aG render jellyfin
systemctl restart jellyfin
systemctl enable jellyfin

groupadd docker
usermod -aG docker sinfallas
newgrp docker
systemctl disable docker

snap install canonical-livepatch
ln -s /snap/bin/canonical-livepatch /usr/bin/canonical-livepatch

apt -y dist-upgrade
glxinfo | grep "OpenGL version"
glxinfo | egrep "OpenGL vendor|OpenGL renderer"

exit 0
